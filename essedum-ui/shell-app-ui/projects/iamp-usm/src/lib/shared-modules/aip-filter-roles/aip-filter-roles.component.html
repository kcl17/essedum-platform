<div class="filter-panel">
  <div class="filter-panel__header"
    [ngClass]="{'filter-panel__header--collapsed': !isFilterExpanded, 'filter-panel__header--expanded': isFilterExpanded}"
    (click)="toggleFilterExpanded()">
    <div class="filter-panel__icon-container">
      <mat-icon id="filter-expand-icon" data-icon-type="filter-expand" class="filter-panel__icon"
        (click)="toggleExpand($event)" [matTooltip]="isFilterExpanded ? 'Collapse Filters' : 'Expand Filters'"
        [matTooltipPosition]="TOOLTIP_POSITION">
        filter_list
      </mat-icon>
    </div>

    <div class="filter-panel__title-container">
      <h3 class="filter-panel__title">
        Filter by:
        <span *ngIf="!isFilterExpanded && hasActiveFilters()" class="filter-summary">
          {{ getActiveFiltersSummary() }}
        </span>
      </h3>
    </div>

    <div class="filter-panel__toggle-container">
      <mat-icon id="filter-toggle-icon" data-icon-type="filter-toggle" class="filter-panel__toggle-icon"
        [ngClass]="{'filter-panel__toggle-icon--rotated': isFilterExpanded}"
        [matTooltip]="isFilterExpanded ? 'Collapse Filters' : 'Expand Filters'" [matTooltipPosition]="TOOLTIP_POSITION">
        keyboard_arrow_down
      </mat-icon>
    </div>
  </div>

  <div class="filter-panel__content" *ngIf="isFilterExpanded" @slideToggle>
    <div [ngSwitch]="componentName">
      <div class="filter-options" *ngSwitchCase="'user-project-role-list'">
        <!-- Role Filter -->
        <div class="filter-group" *ngIf="roleOptions && roleOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Role</label>
              <mat-select id="role-select"
                data-select-type="role-type" (selectionChange)="roleSelected($event)"
                aria-labelledby="role-label" placeholder="All">
                <mat-option *ngIf="selectedRoleList?.length > 0" value="" (click)="clearAllFilters('role')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of roleOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="roleOptions.length === 0" value="" disabled>
                  No roles available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedRoleList?.length > 0">
            <mat-chip-set id="role-chips-set"
              aria-label="Selected roles">
              <mat-chip data-chip-type="role"
                *ngFor="let role of selectedRoleList; let i = index" removable="true"
                (removed)="removeRole(role)">
                {{ role }}
                <mat-icon data-icon-type="chip-remove-role" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- Project Filter -->
        <div class="filter-group" *ngIf="projectOptions && projectOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Project</label>
              <mat-select id="project-select"
                data-select-type="project-type" (selectionChange)="projectSelected($event)"
                aria-labelledby="project-label" placeholder="All">
                <mat-option *ngIf="selectedProjectList?.length > 0" value="" (click)="clearAllFilters('project')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of projectOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="projectOptions.length === 0" value="" disabled>
                  No projects available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedProjectList?.length > 0">
            <mat-chip-set id="project-chips-set"
              aria-label="Selected projects">
              <mat-chip data-chip-type="project"
                *ngFor="let project of selectedProjectList; let i = index" removable="true"
                (removed)="removeProject(project)">
                {{ project }}
                <mat-icon data-icon-type="chip-remove-project" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- User Filter -->
        <div class="filter-group" *ngIf="userOptions && userOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>User</label>
              <mat-select id="user-select"
                data-select-type="user-type" (selectionChange)="userSelected($event)"
                aria-labelledby="user-label" placeholder="All">
                <mat-option *ngIf="selectedUserList?.length > 0" value="" (click)="clearAllFilters('user')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of userOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="userOptions.length === 0" value="" disabled>
                  No users available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedUserList?.length > 0">
            <mat-chip-set id="user-chips-set"
              aria-label="Selected users">
              <mat-chip data-chip-type="user"
                *ngFor="let user of selectedUserList; let i = index" removable="true"
                (removed)="removeUser(user)">
                {{ user }}
                <mat-icon data-icon-type="chip-remove-user" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- Portfolio Filter -->
        <div class="filter-group" *ngIf="portfolioOptions && portfolioOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Portfolio</label>
              <mat-select id="portfolio-select"
                data-select-type="portfolio-type" (selectionChange)="portfolioSelected($event)"
                aria-labelledby="portfolio-label" placeholder="All">
                <mat-option *ngIf="selectedPortfolioList?.length > 0" value="" (click)="clearAllFilters('portfolio')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of portfolioOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="portfolioOptions.length === 0" value="" disabled>
                  No portfolios available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedPortfolioList?.length > 0">
            <mat-chip-set id="portfolio-chips-set"
              aria-label="Selected portfolios">
              <mat-chip data-chip-type="portfolio"
                *ngFor="let portfolio of selectedPortfolioList; let i = index" removable="true"
                (removed)="removePortfolio(portfolio)">
                {{ portfolio }}
                <mat-icon data-icon-type="chip-remove-portfolio" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>
      </div>
      <div class="filter-options" *ngSwitchCase="'role-list'">
        <!-- Role Filter -->
        <div class="filter-group" *ngIf="roleOptions && roleOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Role</label>
              <mat-select id="role-select"
                data-select-type="role-type" (selectionChange)="roleSelected($event)"
                aria-labelledby="role-label" placeholder="All">
                <mat-option *ngIf="selectedRoleList?.length > 0" value="" (click)="clearAllFilters('role')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of roleOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="roleOptions.length === 0" value="" disabled>
                  No roles available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedRoleList?.length > 0">
            <mat-chip-set id="role-chips-set"
              aria-label="Selected roles">
              <mat-chip data-chip-type="role"
                *ngFor="let role of selectedRoleList; let i = index" removable="true"
                (removed)="removeRole(role)">
                {{ role }}
                <mat-icon data-icon-type="chip-remove-role" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- Project Filter -->
        <!-- <div class="filter-group" *ngIf="projectOptions && projectOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Project</label>
              <mat-select id="project-select"
                data-select-type="project-type" (selectionChange)="projectSelected($event)"
                aria-labelledby="project-label" placeholder="All">
                <mat-option *ngIf="selectedProjectList?.length > 0" value="" (click)="clearAllFilters('project')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of projectOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <mat-option *ngIf="projectOptions.length === 0" value="" disabled>
                  No projects available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedProjectList?.length > 0">
            <mat-chip-set id="project-chips-set"
              aria-label="Selected projects">
              <mat-chip data-chip-type="project"
                *ngFor="let project of selectedProjectList; let i = index" removable="true"
                (removed)="removeProject(project)">
                {{ project }}
                <mat-icon data-icon-type="chip-remove-project" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div> -->
      </div>
      <div class="filter-options" *ngSwitchCase="'role-role'">
        <!-- Role Filter -->
        <div class="filter-group" *ngIf="roleOptions && roleOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Role</label>
              <mat-select id="role-select"
                data-select-type="role-type" (selectionChange)="roleSelected($event)"
                aria-labelledby="role-label" placeholder="All">
                <mat-option *ngIf="selectedRoleList?.length > 0" value="" (click)="clearAllFilters('role')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of roleOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="roleOptions.length === 0" value="" disabled>
                  No roles available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedRoleList?.length > 0">
            <mat-chip-set id="role-chips-set"
              aria-label="Selected roles">
              <mat-chip data-chip-type="role"
                *ngFor="let role of selectedRoleList; let i = index" removable="true"
                (removed)="removeRole(role)">
                {{ role }}
                <mat-icon data-icon-type="chip-remove-role" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>
      </div>
      <div class="filter-options" *ngSwitchCase="'project-list'">
        <!-- Portfolio Filter -->
        <div class="filter-group" *ngIf="portfolioOptions && portfolioOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Portfolio</label>
              <mat-select id="portfolio-select"
                data-select-type="portfolio-type" (selectionChange)="portfolioSelected($event)"
                aria-labelledby="portfolio-label" placeholder="All">
                <mat-option *ngIf="selectedPortfolioList?.length > 0" value="" (click)="clearAllFilters('portfolio')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of portfolioOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="portfolioOptions.length === 0" value="" disabled>
                  No portfolios available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedPortfolioList?.length > 0">
            <mat-chip-set id="portfolio-chips-set"
              aria-label="Selected portfolios">
              <mat-chip data-chip-type="portfolio"
                *ngFor="let portfolio of selectedPortfolioList; let i = index" removable="true"
                (removed)="removePortfolio(portfolio)">
                {{ portfolio }}
                <mat-icon data-icon-type="chip-remove-portfolio" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>
      </div>

      <!-- Manage Users Filter -->
      <div class="filter-options" *ngSwitchCase="'manage-users'">
        <!-- User Login Filter -->
        <div class="filter-group" *ngIf="userLoginOptions && userLoginOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>User Login</label>
              <mat-select id="userlogin-select"
                data-select-type="userlogin-type" (selectionChange)="userLoginSelected($event)"
                aria-labelledby="userlogin-label" placeholder="All">
                <mat-option *ngIf="selectedUserLoginList?.length > 0" value="" (click)="clearAllFilters('userlogin')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of userLoginOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="userLoginOptions.length === 0" value="" disabled>
                  No user logins available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedUserLoginList?.length > 0">
            <mat-chip-set id="userlogin-chips-set" aria-label="Selected user logins">
              <mat-chip data-chip-type="userlogin"
                *ngFor="let userLogin of selectedUserLoginList; let i = index" removable="true"
                (removed)="removeUserLogin(userLogin)">
                {{ userLogin }}
                <mat-icon data-icon-type="chip-remove-userlogin" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- Email Filter -->
        <div class="filter-group" *ngIf="emailOptions && emailOptions.length > 0">
          <div class="filter-control">
            <mat-form-field appearance="fill" class="w-100">
              <label>Email</label>
              <mat-select id="email-select"
                data-select-type="email-type" (selectionChange)="emailSelected($event)"
                aria-labelledby="email-label" placeholder="All">
                <mat-option *ngIf="selectedEmailList?.length > 0" value="" (click)="clearAllFilters('email')">
                  All
                </mat-option>
                <ng-container *ngFor="let option of emailOptions">
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                </ng-container>
                <!-- Fallback option if no options available -->
                <mat-option *ngIf="emailOptions.length === 0" value="" disabled>
                  No emails available
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="selected-items" *ngIf="selectedEmailList?.length > 0">
            <mat-chip-set id="email-chips-set" aria-label="Selected emails">
              <mat-chip data-chip-type="email"
                *ngFor="let email of selectedEmailList; let i = index" removable="true"
                (removed)="removeEmail(email)">
                {{ email }}
                <mat-icon data-icon-type="chip-remove-email" matChipRemove>close</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>
      </div>
    </div>
  </div>
