<mat-card class="mat-mdc-card mdc-card lfx-c-card lfx-c-card--hover h-100" appearance="outlined"
    (mouseenter)="card.hover = true" (mouseleave)="card.hover = false">
    <!-- Card category header -->
    <div class="d-flex align-items-center justify-content-between lfx-u-mar-b-8">
        <div class="d-flex align-items-center card-category">
            <div class="lfx-u-header-sm lfx-u-text-primary-80">
                {{ getCategory() | uppercase }}
            </div>
        </div>
        <div *ngIf="servicev1 === 'model'" style="display: flex; align-items: center; gap: 6px">
            <span class="lfx-c-badge">
                <mat-icon [matTooltip]="'Download'" matTooltipPosition="above" (click)="onModelDownload(card)"
                    style="font-size: 18px; line-height: 1" class="header-action-icon"
                    style="justify-content: flex-end">download</mat-icon>
            </span>
        </div>

        <div *ngIf="servicev1 === 'Datasets'">
            <mat-icon [matTooltip]="'View Details'" matTooltipPosition="above" (click)="onViewDetails(card)"
                class="header-action-icon" style="justify-content: flex-end">visibility</mat-icon>
            <mat-icon [matTooltip]="'Download'" matTooltipPosition="above" (click)="onDownload(card)"
                class="header-action-icon" style="justify-content: flex-end">download</mat-icon>
        </div>
    </div>

    <!-- Card header with title and date -->
    <mat-card-header class="card-header">
        <div class="w-100">
            <mat-card-title class="lfx-c-card__container clearfix">
                <div class="lfx-c-card__container-left w-100">
                    <h2 class="lfx-u-header-xl lfx-u-ellipsis aip-fullname-card">
                        {{ getTitle() | titlecase }}
                    </h2>
                </div>
            </mat-card-title>

            <mat-card-subtitle class="lfx-u-body-sm lfx-u-text-neutral-80 lfx-u-ellipsis">
                {{ getDate() | date : "fullDate" }}
            </mat-card-subtitle>
        </div>
    </mat-card-header>

    <!-- Agent card content -->
    <mat-card-content *ngIf="servicev1 === 'agent'" class="agent-card-content">
        <!-- <p class="text-body-md text-neutral aip-desc-ellipsis">
            {{ card.description }}
        </p> -->
        <!-- <div class="agent-metadata">
            <div class="metadata-item">
                <span class="metadata-label">Status:</span>
                <span class="metadata-value" [ngClass]="'status-' + card.status?.toLowerCase()">{{ card.status }}</span>
            </div>
            <div class="metadata-item" *ngIf="card.lastmodifiedon">
                <span class="metadata-label">Modified:</span>
                <span class="metadata-value">{{ card.lastmodifiedon | date:'shortDate' }}</span>
            </div>
        </div> -->
        <!-- <div class="agent-tags" *ngIf="card.tags && card.tags.length > 0">
            <span class="tag" *ngFor="let tag of card.tags">{{ tag }}</span>
        </div> -->
    </mat-card-content>

    <!-- <mat-card-content>
                <p class="text-body-md text-neutral aip-desc-ellipsis">
                  {{ card.description }}
                </p>
              </mat-card-content> -->

    <!-- Card actions -->

    <mat-card-actions *ngIf="servicev1 !== 'Datasets'"
        class="lfx-c-card__action-hover d-flex justify-content-between card-actions-hover">
        <div class="button-placeholder">
            <button mat-raised-button class="view-details-btn" *ngIf="card.hover" (click)="onViewDetails()"
                [@fadeInOut]="'in'">
                View Details
            </button>
        </div>

        <!-- Created by avatar -->
        <div class="aip-cursor">
            <div class="lfx-c-avatar lfx-c-avatar--sm aip-hover-avatar"
                [ngStyle]="{ '--avatar-bg-color': getAvatarBackgroundColor() }">
                {{ getAvatar() | firstCharacter }}
            </div>
            <div class="aip-hover-detail">
                <div class="lfx-u-header-md lfx-u-mar-8">
                    {{ getAvatar() }}
                </div>
            </div>
        </div>

        <!-- Actions menu (conditionally shown) -->
        <div *ngIf="editAuth || deployAuth || deleteAuth" class="dropdown d-inline-block float-end">
            <mat-icon class="aip-cursor aip-more-actions-icon" [matMenuTriggerFor]="menu"
                style="font-size: 24px; padding: 0px; color: #a5aaad; font-weight: 300"
                [ngStyle]="{ color: isMenuHovered ? '#0094ff' : '#737373' }" (mouseenter)="isMenuHovered = true"
                (mouseleave)="isMenuHovered = false">
                more_vert
            </mat-icon>
            <mat-menu #menu="matMenu">
                <button mat-menu-item *ngIf="editAuth" (click)="onEdit()">
                    <mat-icon class="aip-menu-icon">edit</mat-icon>
                    Edit
                </button>
                <button mat-menu-item *ngIf="servicev1 === 'connections'" (click)="onViewDatasets(card.type)">
                    <mat-icon class="aip-menu-icon">storage</mat-icon>
                    View Datasets
                </button>
                <button mat-menu-item *ngIf="deleteAuth" (click)="onDelete()">
                    <mat-icon class="aip-menu-delete">delete</mat-icon>
                    Delete
                </button>
                <button mat-menu-item *ngIf="servicev1 === 'pipeline' && card.type == 'REMOTE'" (click)="jobConsole()">
                    <mat-icon class="aip-menu-icon">terminal</mat-icon>
                    Job Console
                </button>
            </mat-menu>
        </div>
    </mat-card-actions>

    <!-- Dataset Action icons -->
    <mat-card-actions *ngIf="servicev1 === 'Datasets'"
        class="lfx-c-card__action-hover d-flex justify-content-between card-actions-hover">
        <button mat-icon-button [matTooltip]="'Copy'" matTooltipPosition="above" (click)="onCopy(card)">
            <mat-icon class="action-icon">content_copy</mat-icon>
        </button>
        <button *ngIf="editAuth" mat-icon-button [matTooltip]="'Edit'" matTooltipPosition="above"
            (click)="onEdit(content3)">
            <mat-icon class="action-icon">edit</mat-icon>
        </button>
        <button *ngIf="deleteAuth" mat-icon-button [matTooltip]="'Delete'" matTooltipPosition="above"
            (click)="onDelete(card.name)">
            <mat-icon class="action-icon">delete</mat-icon>
        </button>
    </mat-card-actions>

    <!-- Agent Actions - same style as other cards -->
    <mat-card-actions *ngIf="servicev1 === 'agent'"
        class="lfx-c-card__action-hover d-flex justify-content-between card-actions-hover">
        <div class="button-placeholder">
            <button mat-raised-button class="view-details-btn" *ngIf="card.hover" (click)="onViewDetails()"
                [@fadeInOut]="'in'">
                View Details
            </button>
        </div>

        <!-- Created by avatar -->
        <div class="aip-cursor">
            <div class="lfx-c-avatar lfx-c-avatar--sm aip-hover-avatar"
                [ngStyle]="{ '--avatar-bg-color': getAvatarBackgroundColor() }">
                {{ getAvatar() | firstCharacter }}
            </div>
            <div class="aip-hover-detail">
                <div class="lfx-u-header-md lfx-u-mar-8">
                    {{ getAvatar() }}
                </div>
            </div>
        </div>

        <!-- Actions menu (conditionally shown) -->
        <div *ngIf="editAuth || deleteAuth" class="dropdown d-inline-block float-end">
            <mat-icon class="aip-cursor aip-more-actions-icon" [matMenuTriggerFor]="agentMenu"
                style="font-size: 24px; padding: 0px; color: #a5aaad; font-weight: 300"
                [ngStyle]="{ color: isMenuHovered ? '#0094ff' : '#737373' }" (mouseenter)="isMenuHovered = true"
                (mouseleave)="isMenuHovered = false">
                more_vert
            </mat-icon>
            <mat-menu #agentMenu="matMenu">
                <button mat-menu-item *ngIf="editAuth" (click)="onEdit()">
                    <mat-icon class="aip-menu-icon">edit</mat-icon>
                    Edit
                </button>
                <button mat-menu-item *ngIf="deleteAuth" (click)="onDelete()">
                    <mat-icon class="aip-menu-delete">delete</mat-icon>
                    Delete
                </button>
            </mat-menu>
        </div>
    </mat-card-actions>
</mat-card>